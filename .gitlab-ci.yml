image: "python:latest"

before_script:
  - apt-get update
  - apt-get install -y libgl1-mesa-glx xvfb
  - apt-get install -y python3-pyqt5
  - python --version
  - pip install git+https://gitlab.com/ficsresearch/imageprocessing@development
  - pip install -e .
  - pip install pytest-cov
  - xvfb-run python -c "from s3a.generalutils import resolveAuthorName;resolveAuthorName('testauthor')"

stages:
  - Test

pytest:
  stage: Test
  script:
    - xvfb-run -a pytest ./apptests --cov-report term --cov=.
