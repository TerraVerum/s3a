image: "python:latest"

before_script:
  - apt-get update
  - apt-get install -y python3-pyqt5
  - python --version
  - pip install -e .
  - pip install pytest-cov
  - pip install pytest-qt

stages:
  - Test
  # - Deploy

pytest:
  stage: Test
  script:
    - pytest -l ./apptests --cov-report term --cov=.

# pypi:
#   stage: Deploy
#   when: manual
#   variables:
#     TWINE_USERNAME: $TWINE_USERNAME
#     TWINE_PASSWORD: $TWINE_PASSWORD
#   script:
#     - pip install -U twine
#     - python setup.py sdist bdist_wheel
#     - python -m twine upload --skip-existing dist/*
